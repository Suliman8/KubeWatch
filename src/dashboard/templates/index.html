<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KubeWatch - Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
    <link rel="stylesheet" href="/static/css/dashboard.css">
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="logo">
            <span class="logo-icon">K</span>
            <div>
                <h1>KubeWatch</h1>
                <p class="tagline">Kubernetes Monitoring</p>
            </div>
        </div>
        <div class="header-right">
            <span class="status-dot" id="connectionDot"></span>
            <span id="connectionStatus">Connecting...</span>
            <span class="refresh-info">Auto-refresh: 15s</span>
        </div>
    </header>

    <!-- STATS BAR -->
    <div class="stats-bar">
        <div class="stat-card clickable" onclick="showDetail('pods')">
            <div class="stat-value" id="totalPods">-</div>
            <div class="stat-label">Pods</div>
        </div>
        <div class="stat-card clickable" onclick="showDetail('running')">
            <div class="stat-value" id="runningPods">-</div>
            <div class="stat-label">Running</div>
        </div>
        <div class="stat-card clickable" onclick="showDetail('nodes')">
            <div class="stat-value" id="totalNodes">-</div>
            <div class="stat-label">Nodes</div>
        </div>
        <div class="stat-card clickable" onclick="showDetail('deployments')">
            <div class="stat-value" id="totalDeploys">-</div>
            <div class="stat-label">Deployments</div>
        </div>
        <div class="stat-card clickable" onclick="showDetail('services')">
            <div class="stat-value" id="totalRestarts">-</div>
            <div class="stat-label">Restarts</div>
        </div>
        <div class="stat-card alert-stat clickable" onclick="showDetail('alerts')">
            <div class="stat-value" id="totalAlerts">-</div>
            <div class="stat-label">Alerts</div>
        </div>
    </div>

    <!-- DETAIL MODAL -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">Details</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
            </div>
        </div>
    </div>

    <!-- MAIN GRID -->
    <div class="grid">
        <!-- HEALTH SCORES -->
        <div class="card full-width">
            <div class="card-header">
                <h2>Service Health</h2>
            </div>
            <div class="card-body" id="healthScores">
                <p class="loading">Loading health scores...</p>
            </div>
        </div>

        <!-- ALERTS -->
        <div class="card">
            <div class="card-header">
                <h2>Active Alerts</h2>
                <span class="badge" id="alertBadge">0</span>
            </div>
            <div class="card-body scroll-area" id="alertList">
                <p class="loading">Loading alerts...</p>
            </div>
        </div>

        <!-- PODS -->
        <div class="card">
            <div class="card-header">
                <h2>Pods</h2>
            </div>
            <div class="card-body scroll-area" id="podList">
                <p class="loading">Loading pods...</p>
            </div>
        </div>

        <!-- CPU CHART -->
        <div class="card">
            <div class="card-header">
                <h2>CPU Usage (millicores)</h2>
            </div>
            <div class="card-body chart-container">
                <canvas id="cpuChart"></canvas>
            </div>
        </div>

        <!-- MEMORY CHART -->
        <div class="card">
            <div class="card-header">
                <h2>Memory Usage (MB)</h2>
            </div>
            <div class="card-body chart-container">
                <canvas id="memChart"></canvas>
            </div>
        </div>

        <!-- EVENTS -->
        <div class="card full-width">
            <div class="card-header">
                <h2>Recent Events</h2>
            </div>
            <div class="card-body scroll-area" id="eventList">
                <p class="loading">Loading events...</p>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <p>KubeWatch v1.0.0 | Created by SULIMAN KHAN | 2026</p>
    </footer>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>
